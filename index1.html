<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
</head>
<body>
   <video id="preview"></video>

   <button id="capture">capture</button>

   <canvas id="output" style="display: none;"></canvas>

   <img id="result">


   <br>
   <br>
   <br>
   <form action="">
      <input type="file" accept="image/*" capture="camera" >
      <input type="text" name="" id="inputfoto">
      <input type="text" name="" id="">
      <button type="submit">submit</button>
   </form>


   <script>
      const [preview, output, capture, result, imgurl] = [
         document.getElementById('preview'),
         document.getElementById('output'),
         document.getElementById('capture'),
         document.getElementById('result'),
         document.getElementById('imgurl')

   ]

      navigator.mediaDevices.getUserMedia({
         audio: false,
         video: {
            width: 400,
            height: 400
            
         }
      })
      .then(stream => {
         preview.srcObject = stream;
         preview.play();
      })
      .catch(error => {
         console.error(error);
      });

      capture.addEventListener('click', () => {
         var img = document.createElement('img');
         const context = output.getContext('2d');

         output.width = 400;
         output.height = 400;

         context.drawImage(preview, 0, 0, output.width, output.height);
         result.src = output.toDataURL();

         var input_foto=document.getElementById("result").src;
         document.getElementById("inputfoto").value=input_foto; 
      });
   </script>
</body>
</html>